import { type EventEmitter } from 'events';
import { type Router, type Request, type Response } from 'express';
export { SYSTEM_MESSAGE_CODES, SystemMessageCode } from './system-messages'
import { SystemMessageCode } from './system-messages';

/**
* ╫Ф╫Т╫У╫и╫Х╫к ╫Ь╫Ю╫Щ╫з╫Х╫Э ╫Х╫Ц╫Ю╫Я ╫в╫С╫Х╫и ╫б╫Х╫Т ╫Ф╫Х╫У╫в╫Ф 'zmanim'
*/
export interface ZmanimData {
   time?: string;
   zone?: string;
   difference?: string;
}

/**
* ╫Ф╫Т╫У╫и╫Х╫к ╫Ь╫Ю╫Х╫Ц╫Щ╫з╫Ф ╫С╫Ф╫Ю╫к╫а╫Ф ╫в╫С╫Х╫и ╫б╫Х╫Т ╫Ф╫Х╫У╫в╫Ф 'music_on_hold'
*/
export interface MusicOnHoldData {
   musicName: string;
   maxSec?: number;
}

/**
* ╫Ю╫Щ╫Щ╫ж╫Т "╫Ф╫Х╫У╫в╫Ф" ╫Ф╫а╫Щ╫к╫а╫к ╫Ь╫Ф╫й╫Ю╫в╫Ф ╫СтАл`read`/`id_list_message`
*/
export type Msg =
   | ({ type: 'file'; data: string; removeInvalidChars?: boolean })
   | ({ type: 'text'; data: string; removeInvalidChars?: boolean })
   | ({ type: 'speech'; data: string; removeInvalidChars?: boolean })
   | ({ type: 'digits'; data: number | string; removeInvalidChars?: boolean })
   | ({ type: 'number'; data: number | string; removeInvalidChars?: boolean })
   | ({ type: 'alpha'; data: string; removeInvalidChars?: boolean })
   | ({ type: 'zmanim'; data: ZmanimData; removeInvalidChars?: boolean })
   | ({ type: 'go_to_folder'; data: string; removeInvalidChars?: boolean })
   | ({ type: 'system_message'; data: SystemMessageCode; removeInvalidChars?: boolean })
   | ({ type: 'music_on_hold'; data: MusicOnHoldData; removeInvalidChars?: boolean })
   | ({ type: 'date'; data: string; removeInvalidChars?: boolean })
   | ({ type: 'dateH'; data: string; removeInvalidChars?: boolean });
   
interface Defaults {
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫У╫д╫Щ╫б ╫Ь╫Х╫Т ╫Ю╫д╫Х╫и╫Ш ╫в╫Ь ╫Ы╫Ь ╫з╫и╫Щ╫Р╫Ф ╫Ь╫й╫и╫к, ╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф, ╫а╫Щ╫к╫Х╫з ╫Х╫в╫Х╫У. ╫й╫Щ╫Ю╫Х╫й╫Щ ╫Ь╫д╫Щ╫к╫Х╫Ч ╫Х╫У╫Щ╫С╫Х╫Т<br>
     * @see [router.events](https://github.com/ShlomoCode/yemot-router2#events) - ╫з╫С╫Ь╫к ╫з╫Р╫Ь╫С╫з ╫в╫Ь ╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф/╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ю╫Р╫Ц╫Щ╫Я/╫а╫Щ╫к╫Х╫з ╫й╫Щ╫Ч╫Ф, ╫Ь╫Ю╫й╫к╫Ю╫й╫Щ╫Э ╫Ю╫к╫з╫У╫Ю╫Щ╫Э. ╫Ь╫Р ╫к╫Ь╫Х╫Щ ╫С╫Ф╫Т╫У╫и╫Ф ╫Ц╫Х
     * @default false
     */
    printLog?: boolean
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫б╫Щ╫и ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э (`.`,`-`,`'`,`"`,`&`) ╫Ю╫к╫й╫Х╫С╫Х╫к ╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш<br>
     * ,╫С╫Р╫Э ╫Ь╫Р ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь), ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫С╫Р╫Э ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф тАл(`true`) ╫Ф╫к╫Х╫Х╫Щ╫Э ╫Щ╫Х╫б╫и╫Х ╫Ю╫Ф╫к╫й╫Х╫С╫Ф ╫й╫к╫Х╫Ч╫Ц╫и ╫Ь╫Щ╫Ю╫Х╫к ╫Х╫Ь╫Р ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫Ц╫Ф ╫С3 ╫и╫Ю╫Х╫к, ╫и╫Р╫Х [╫к╫Щ╫в╫Х╫У ╫Ю╫Ь╫Р](https://github.com/ShlomoCode/yemot-router2#%D7%AA%D7%95%D7%95%D7%99%D7%9D-%D7%9C%D7%90-%D7%97%D7%95%D7%A7%D7%99%D7%99%D7%9D-%D7%91%D7%94%D7%A7%D7%A8%D7%90%D7%AA-%D7%98%D7%A7%D7%A1%D7%98)
     * @default false
     */
    removeInvalidChars?: boolean
    read?: {
        /**
         * тАл ╫Ц╫Ю╫Я ╫Ф╫Ю╫к╫а╫Ф ╫Ь╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ф╫Ю╫й╫к╫Ю╫й (╫С╫Ю╫Щ╫Ь╫Щ╫й╫а╫Щ╫Х╫к). ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ь╫Р ╫Ф╫к╫з╫С╫Ь ╫Ф╫а╫к╫Х╫Я ╫С╫Ц╫Ю╫Я ╫Ф╫а"╫Ь, ╫Ф╫й╫Щ╫Ч╫Ф ╫к╫Щ╫Ю╫Ч╫з ╫Ю╫Ф`activeCalls` ╫Х╫Т╫Э ╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫з╫Щ╫й ╫Ф╫й╫и╫к ╫Щ╫з╫С╫Ь ╫Р╫Х╫к╫Х ╫Ы╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф<br>
         * тАл╫Ю╫з╫С╫Ь ╫Ю╫б╫д╫и ╫Ю╫Щ╫Ь╫Щ╫й╫Щ╫а╫Щ╫Х╫к, ╫Р╫Х ╫Ю╫Ч╫и╫Х╫Ц╫к ╫Ф╫з╫С╫Щ╫Ь╫Ф ╫в"╫Щ ╫б╫д╫и╫Щ╫Щ╫к [╫б╫д╫и╫Щ╫Щ╫к ms](https://npmjs.com/ms).<br>
         * тАл╫Ю╫Ы╫б╫Ф ╫Т╫Э ╫Ю╫з╫и╫Щ ╫з╫ж╫Ф ╫й╫Ь╫Р ╫Ф╫к╫з╫С╫Ь╫Ф ╫Ю╫Щ╫Ю╫Х╫к ╫Р╫Х╫к ╫а╫Щ╫к╫Х╫з (╫з╫и╫Щ╫Р╫Ф ╫в╫Э `hangup=yes` ╫С╫д╫и╫Ш╫и╫Щ╫Э)<br>
         * 
         * тАл╫Щ╫й ╫Ь╫й╫Щ╫Э ╫Ь╫С ╫Ь╫Р ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫а╫Ю╫Х╫Ъ ╫й╫Ю╫Ч╫Щ╫Щ╫Т ╫Ь╫Т╫Щ╫Ш╫Щ╫Ю╫Щ ╫й╫Ь╫Р ╫Ф╫з╫Щ╫й ╫Ю╫Щ╫У ╫к╫й╫Х╫С╫Ф ╫в╫Ь╫Х╫Ь ╫Ь╫Ф╫Щ╫к╫з╫Ь ╫С-timeout<br>
         * 
         * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Р╫Щ╫Я тАлtimeout
         */
        timeout?: number
        tap?: TapOptions
        stt?: SstOptions
        record?: RecordOptions
    }
    id_list_message?: IdListMessageOptions
}

// from @types/express - https://github.com/DefinitelyTyped/DefinitelyTyped/blob/f800de4ffd291820a9e444e6b6cd3ac9b4a16e53/types/express/index.d.ts#L73-#L92
interface ExpressRouterOptions {
    /**
     * Enable case sensitivity.
     */
    caseSensitive?: boolean | undefined

    /**
     * Preserve the req.params values from the parent router.
     * If the parent and the child have conflicting param names, the child's value take precedence.
     *
     * @default false
     * @since 4.5.0
     */
    mergeParams?: boolean | undefined

    /**
     * Enable strict routing.
     */
    strict?: boolean | undefined
}

type YemotRouterOptions = ExpressRouterOptions & {
    /**
     * тАл ╫Ц╫Ю╫Я ╫Ф╫Ю╫к╫а╫Ф ╫Ь╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ф╫Ю╫й╫к╫Ю╫й (╫С╫Ю╫Щ╫Ь╫Щ╫й╫а╫Щ╫Х╫к). ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ь╫Р ╫Ф╫к╫з╫С╫Ь ╫Ф╫а╫к╫Х╫Я ╫С╫Ц╫Ю╫Я ╫Ф╫а"╫Ь, ╫Ф╫й╫Щ╫Ч╫Ф ╫к╫Щ╫Ю╫Ч╫з ╫Ю╫Ф`activeCalls` ╫Х╫Т╫Э ╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫з╫Щ╫й ╫Ф╫й╫и╫к ╫Щ╫з╫С╫Ь ╫Р╫Х╫к╫Х ╫Ы╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф<br>
     * тАл╫Ю╫з╫С╫Ь ╫Ю╫б╫д╫и ╫Ю╫Щ╫Ь╫Щ╫й╫Щ╫а╫Щ╫Х╫к, ╫Р╫Х ╫Ю╫Ч╫и╫Х╫Ц╫к ╫Ф╫з╫С╫Щ╫Ь╫Ф ╫в"╫Щ ╫б╫д╫и╫Щ╫Щ╫к [╫б╫д╫и╫Щ╫Щ╫к ms](https://npmjs.com/ms).<br>
     * тАл╫Ю╫Ы╫б╫Ф ╫Т╫Э ╫Ю╫з╫и╫Щ ╫з╫ж╫Ф ╫й╫Ь╫Р ╫Ф╫к╫з╫С╫Ь╫Ф ╫Ю╫Щ╫Ю╫Х╫к ╫Р╫Х╫к ╫а╫Щ╫к╫Х╫з (╫з╫и╫Щ╫Р╫Ф ╫в╫Э `hangup=yes` ╫С╫д╫и╫Ш╫и╫Щ╫Э)<br>
     * 
     * тАл╫Щ╫й ╫Ь╫й╫Щ╫Э ╫Ь╫С ╫Ь╫Р ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫а╫Ю╫Х╫Ъ ╫й╫Ю╫Ч╫Щ╫Щ╫Т ╫Ь╫Т╫Щ╫Ш╫Щ╫Ю╫Щ ╫й╫Ь╫Р ╫Ф╫з╫Щ╫й ╫Ю╫Щ╫У ╫к╫й╫Х╫С╫Ф ╫в╫Ь╫Х╫Ь ╫Ь╫Ф╫Щ╫к╫з╫Ь ╫С-timeout<br>
     * 
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Р╫Щ╫Я тАлtimeout
     */
    timeout?: number
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫У╫д╫Щ╫б ╫Ь╫Х╫Т ╫Ю╫д╫Х╫и╫Ш ╫в╫Ь ╫Ы╫Ь ╫з╫и╫Щ╫Р╫Ф ╫Ь╫й╫и╫к, ╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф, ╫а╫Щ╫к╫Х╫з ╫Х╫в╫Х╫У. ╫й╫Щ╫Ю╫Х╫й╫Щ ╫Ь╫д╫Щ╫к╫Х╫Ч ╫Х╫У╫Щ╫С╫Х╫Т<br>
     * @see [router.events](https://github.com/ShlomoCode/yemot-router2#events) - ╫з╫С╫Ь╫к ╫з╫Р╫Ь╫С╫з ╫в╫Ь ╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф/╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ю╫Р╫Ц╫Щ╫Я/╫а╫Щ╫к╫Х╫з ╫й╫Щ╫Ч╫Ф, ╫Ь╫Ю╫й╫к╫Ю╫й╫Щ╫Э ╫Ю╫к╫з╫У╫Ю╫Щ╫Э. ╫Ь╫Р ╫к╫Ь╫Х╫Щ ╫С╫Ф╫Т╫У╫и╫Ф ╫Ц╫Х
     * @default false
     */
    printLog?: boolean
    /**
     * ╫Ф╫Т╫У╫и╫к ╫з╫Р╫Ь╫С╫з ╫Ь╫Ш╫Щ╫д╫Х╫Ь ╫С╫й╫Т╫Щ╫Р╫Х╫к ╫С╫к╫Х╫Ъ ╫й╫Щ╫Ч╫Ф, ╫й╫Щ╫Ю╫Х╫й╫Щ ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ь╫й╫Ю╫Щ╫и╫к ╫Ь╫Х╫Т + ╫Ф╫й╫Ю╫в╫к ╫Ф╫Х╫У╫в╫Ф ╫Ь╫Ю╫й╫к╫Ю╫й, ╫С╫Ю╫з╫Х╫Э ╫з╫и╫Щ╫б╫Ф ╫й╫Ь ╫Ф╫й╫и╫к (╫Х╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫й╫Ю╫в "╫Р╫Щ╫Я ╫Ю╫в╫а╫Ф ╫Ю╫й╫и╫к тАлAPI")<br>
     * ╫и╫Р╫Ф ╫У╫Х╫Т╫Ю╫Ф ╫СтАл[example.js](https://github.com/ShlomoCode/yemot-router2/blob/master/example.js)
     */
    uncaughtErrorHandler?: (error: Error, call: Call) => void | Promise<unknown>
    defaults?: Defaults
};

type CallHandler = (call: Call) => Promise<unknown>;

interface RouterEventEmitter extends EventEmitter {
    on: (eventName: 'call_hangup' | 'call_continue' | 'new_call', listener: (call: Call) => void) => this
    once: (eventName: 'call_hangup' | 'call_continue' | 'new_call', listener: (call: Call) => void) => this
}

export function YemotRouter (options?: YemotRouterOptions): {
    /**
     * ╫Ф╫Х╫б╫д╫к ╫Ф╫а╫Ь╫У╫и ╫Ь╫й╫Щ╫Ч╫Х╫к (╫С╫Ю╫к╫Х╫У╫к тАл`GET` ╫С╫Ь╫С╫У)
     */
    get: (path: string, handler: CallHandler) => void
    /**
     * ╫Ф╫Х╫б╫д╫к ╫Ф╫а╫Ь╫У╫и ╫Ь╫й╫Щ╫Ч╫Х╫к (╫С╫Ю╫к╫Х╫У╫к тАл`POST` ╫С╫Ь╫С╫У - тАл`api_url_post=yes`)
     */
    post: (path: string, handler: CallHandler) => void
    /**
     * ╫Ф╫Х╫б╫д╫к ╫Ф╫а╫Ь╫У╫и ╫Ь╫й╫Щ╫Ч╫Х╫к ╫С╫Ю╫к╫Х╫У╫к тАл`GET` ╫Х╫Т╫Э ╫С╫Ю╫к╫Х╫У╫к тАл`POST`
     */
    all: (path: string, handler: CallHandler) => void
    use: Router['use']
    /**
     * delete call from active calls by callId
     * @returns true if the call was deleted, false if the call was not found
     */
    deleteCall: (callId: string) => boolean
    events: RouterEventEmitter
    defaults: Defaults
    /**
     * ╫Ю╫к╫Х╫У╫Ф ╫Ь╫й╫Щ╫Ю╫Х╫й ╫С╫Ш╫Щ╫Щ╫д╫б╫з╫и╫Щ╫д╫Ш ╫С╫Ь╫С╫У
     * ---------------
     * ╫Ю╫Ч╫Ц╫Щ╫и ╫Р╫к ╫Ф╫и╫Р╫Х╫Ш╫и тАл(`YemotRouter`) ╫Ы╫д╫Щ ╫й╫Ф╫Х╫Р - ╫в╫Э ╫Ш╫Щ╫Щ╫д ╫й╫Ь тАл`Express.Router`, ╫Ь╫Ю╫а╫Щ╫в╫к ╫й╫Т╫Щ╫Р╫к ╫Ш╫Щ╫Щ╫д
     * @example ```ts
     * import express from 'express';
     * import { YemotRouter } from 'yemot-router';
     *  
     * const app = express();
     * const router = YemotRouter();
     * 
     * app.use(router.asExpressRouter); // ЁЯСИЁЯСИЁЯСИ
     * ```
     */
    asExpressRouter: Router
};

// based of https://tchumim.com/post/157692, https://tchumim.com/post/157706
interface ReadModes {
    tap: TapOptions
    stt: SstOptions
    record: RecordOptions
}

/**
 * ╫Ю╫Щ╫Щ╫ж╫Т "╫й╫Щ╫Ч╫Ф", ╫в╫Ь╫Щ╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ф╫д╫в╫Щ╫Ь ╫Ю╫к╫Х╫У╫Х╫к ╫й╫Х╫а╫Х╫к ╫Ы╫Ю╫Х тАл`read`, `id_list_message`, `go_to_folder` ╫Х╫Ы╫Х'
 */
export interface Call {
    /**
     * ╫Ю╫к╫Х╫У╫Ф ╫Ь╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ф╫Ю╫Ч╫Щ╫Щ╫Т, ╫Ю╫Ч╫Ц╫Щ╫и╫Ф тАл`Promise` ╫й╫а╫д╫к╫и ╫в╫Э ╫б╫Ш╫и╫Щ╫а╫Т ╫в╫Э ╫Ф╫к╫й╫Х╫С╫Ф (╫С╫Ю╫з╫и╫Ф ╫й╫Ь ╫С╫з╫й╫к ╫Ф╫з╫Ь╫Ш╫Ф, ╫Щ╫Ч╫Ц╫Х╫и ╫а╫к╫Щ╫С ╫Ф╫з╫Х╫С╫е)<br>
     * [╫д╫Щ╫и╫Х╫Ш ╫а╫Х╫б╫г ╫в╫Ь тАлread ╫С╫к╫Щ╫в╫Х╫У ╫Щ╫Ю╫Х╫к ╫Ф╫Ю╫й╫Щ╫Ч](https://f2.freeivr.co.il/post/78283)
     * @param messages ╫Ю╫в╫и╫Ъ ╫Ф╫Ф╫Х╫У╫в╫Х╫к ╫й╫Щ╫Х╫й╫Ю╫в╫Х ╫Ь╫Ю╫й╫к╫Ю╫й ╫Ь╫д╫а╫Щ ╫з╫С╫Ь╫к ╫Ф╫а╫к╫Х╫Я
     * @param mode ╫б╫Х╫Т ╫Ф╫а╫к╫Х╫Я ╫й╫Ю╫С╫з╫й╫Щ╫Э ╫Ю╫Ф╫Ю╫Ч╫Щ╫Щ╫Т<br>
     * `tap` = ╫Ф╫з╫й╫Х╫к<br>
     * `stt` = ╫Ц╫Щ╫Ф╫Х╫Щ ╫У╫Щ╫С╫Х╫и<br>
     * `record` = ╫Ф╫з╫Ь╫Ш╫Ф
     * @param options ╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫а╫Х╫б╫д╫Х╫к ╫Ь╫д╫Щ ╫б╫Х╫Т ╫Ф╫а╫к╫Х╫Я - ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫б╫д╫и╫Х╫к ╫Ю╫Х╫к╫и╫Х╫к ╫Ь╫Ф╫з╫й╫Ф, ╫Ю╫з╫б╫Щ╫Ю╫Х╫Э ╫б╫д╫и╫Х╫к, ╫Х╫Ы╫Х╫Ь╫Щ
     */
    read: <T extends keyof ReadModes>(messages: Msg[], mode: T, options?: ReadModes[T]) => Promise<string>
    /**
     * ╫Ю╫к╫Х╫У╫Ф ╫Ь╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ю╫б╫Х╫Щ╫Ю╫к ╫С╫Ю╫в╫и╫Ы╫к ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к
     * @param target ╫а╫к╫Щ╫С ╫Ь╫Ю╫в╫С╫и, ╫Щ╫Ч╫б╫Щ ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к, ╫Щ╫Ч╫б╫Щ ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫и╫Р╫й╫Щ╫к (╫Ю╫к╫Ч╫Щ╫Ь ╫С`/`). [╫д╫Щ╫и╫Х╫Ш ╫й╫Ь ╫Ф╫Р╫Х╫д╫ж╫Щ╫Х╫к ╫Ф╫Ц╫Ю╫Щ╫а╫Х╫к](https://f2.freeivr.co.il/post/58)
     * @see {@link hangup|`call.hangup()`} - ╫з╫Щ╫ж╫Х╫и ╫Ь╫а╫Х╫Ч╫Х╫к ╫й╫Ь тАл`go_to_folder('hangup')`
     */
    go_to_folder: (target: string) => void
    /**
     * ╫Ф╫й╫Ю╫в╫к ╫Ф╫Х╫У╫в╫Ф ╫Р╫Ч╫к ╫Р╫Х ╫Щ╫Х╫к╫и<br>
     * <hr>
     * 
     * тЪая╕П ╫й╫Щ╫Э ╫Ь╫С! тЪая╕П<br>
     * ╫Ь╫Р╫Ч╫и ╫Ф╫й╫Ю╫в╫к ╫Ф╫Ф╫Х╫У╫в╫Х╫к, ╫Ф╫й╫Щ╫Ч╫Ф ╫к╫ж╫Р ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫Ю╫Ф╫й╫Ь╫Х╫Ч╫Ф!
     * ╫С╫Р╫Э ╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫Ь╫й╫и╫й╫и ╫д╫в╫Х╫Ь╫Ф ╫а╫Х╫б╫д╫к ╫Ь╫Р╫Ч╫и ╫Ф╫Ф╫й╫Ю╫в╫Ф, ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ь╫Ф╫й╫Ю╫Щ╫в ╫Ф╫Х╫У╫в╫Ф ╫Х╫Р╫Ц ╫Ь╫С╫ж╫в тАл`read` (╫з╫С╫Ь╫к ╫а╫к╫Х╫а╫Щ╫Э ╫а╫Х╫б╫д╫Щ╫Э), ╫Щ╫й ╫Ь╫Ф╫Т╫У╫Щ╫и ╫С╫Р╫и╫Т╫Х╫Ю╫а╫Ш ╫ФтАл`options` ╫Р╫к тАл`prependToNextAction` ╫ЬтАл`true`
     * @param messages 
     * @param options 
     * @example  ╫Ф╫й╫Ю╫в╫к ╫Ф╫Х╫У╫в╫Ф ╫Х╫Щ╫ж╫Щ╫Р╫Ф ╫Ю╫Ф╫й╫Ь╫Х╫Ч╫Ф
     * ```js
     * call.id_list_message([{ type: 'text', data: '╫Ф╫Х╫У╫в╫Ф ╫Ь╫У╫Х╫Т╫Ю╫Ф' }]);
     * ```
     * @example ╫Ф╫й╫Ю╫в╫к ╫Ф╫Х╫У╫в╫Ф ╫Х╫Ф╫Ю╫й╫Ъ ╫Ь╫д╫в╫Х╫Ь╫Ф ╫Ф╫С╫Р╫Ф - ╫Ь╫У╫Х╫Т╫Ю╫Ф тАл`read`
     * ```js
     * call.id_list_message([{ type: 'text', data: '╫Ф╫Х╫У╫в╫Ф ╫Ь╫У╫Х╫Т╫Ю╫Ф' }], { prependToNextAction: true });
     * const res = await call.read([{ type: 'text', data: '╫Ф╫з╫й ╫Ю╫й╫Ф╫Х' }], 'tap');
     * ```
     */
    id_list_message: (messages: Msg[], options?: IdListMessageOptions) => void
    /**
     * ╫Ю╫к╫Х╫У╫Ф ╫Ь╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ь╫Ю╫в╫и╫Ы╫к ╫Р╫Ч╫и╫к ╫С╫Щ╫Ю╫Х╫к ╫Ф╫Ю╫й╫Щ╫Ч ╫Ь╫Ь╫Р ╫в╫Ь╫Х╫к ╫Щ╫Ч╫Щ╫У╫Х╫к, ╫С╫Р╫Ю╫ж╫в╫Х╫к тАл"╫и╫Р╫Х╫Ш╫Щ╫а╫Т ╫Щ╫Ю╫Х╫к"<br>
     * ╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф ╫Ю╫з╫С╫Ь╫к ╫Р╫и╫Т╫Х╫Ю╫а╫Ш ╫Щ╫Ч╫Щ╫У - ╫б╫Ш╫и╫Щ╫а╫Т ╫й╫Ь ╫Ю╫б╫д╫и ╫Ю╫в╫и╫Ы╫к ╫С╫Щ╫Ю╫Х╫к ╫Ь╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Р╫Ь╫Щ╫Ф<br>
     */
    routing_yemot: (number: string) => void
    /**
     * ╫Ф╫д╫в╫Ь╫Ф ╫Ю╫Ч╫У╫й ╫й╫Ь ╫Ф╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к<br>
     * <hr>
     * 
     * тАл╫з╫Щ╫ж╫Х╫и ╫Ь╫к╫Ч╫С╫Щ╫и ╫Ф╫С╫Р:
     * ```js
     * call.go_to_folder(`/${call.ApiExtension}`);
     * ```
     */
    restart_ext: () => void
    /**
     * ╫а╫Щ╫к╫Х╫з ╫Ф╫й╫Щ╫Ч╫Ф. ╫з╫Щ╫ж╫Х╫и ╫Ь╫к╫Ч╫С╫Щ╫и ╫Ф╫С╫РтАл:
     * ```js
     * call.go_to_folder('hangup');
     * ```
     */
    hangup: () => void
    blockRunningUntilNextRequest: () => Promise<void>
    /**
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫Ю╫к╫Х╫У╫Ф ╫Ц╫Х ╫Ы╫У╫Щ ╫Ь╫й╫Ь╫Х╫Ч ╫б╫Ш╫и╫Щ╫а╫Т ╫Ч╫Х╫д╫й╫Щ ╫Ь╫Ч╫Ь╫Х╫Ш╫Щ╫Я, ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫в╫С╫Х╫и ╫д╫Х╫а╫з╫ж╫Щ╫Х╫а╫Ь╫Щ╫Х╫к ╫й╫в╫У╫Щ╫Щ╫Я ╫Ь╫Р ╫а╫к╫Ю╫Ы╫к ╫С╫б╫д╫и╫Щ╫Щ╫Ф<br>
     * ╫С╫Ю╫к╫Х╫У╫Ф ╫Ц╫Х ╫Щ╫й ╫Ь╫Ф╫в╫С╫Щ╫и ╫Р╫к ╫Ф╫б╫Ш╫и╫Щ╫а╫Т ╫С╫У╫Щ╫Х╫з ╫Ы╫д╫Щ ╫й╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫й╫Ф╫й╫и╫к ╫й╫Ь ╫Щ╫Ю╫Х╫к ╫Щ╫з╫С╫Ь ╫Р╫Х╫к╫Х, ╫Х╫Ф╫Х╫Р ╫Ь╫Р ╫в╫Х╫С╫и ╫Р╫г ╫Х╫Ь╫Щ╫У╫ж╫Щ╫Ф ╫Р╫Х ╫в╫Щ╫С╫Х╫У<br>
     * 
     * :╫Ы╫У╫Щ ╫Ь╫Ф╫й╫к╫Ю╫й ╫Ь╫С╫з╫й╫к ╫Ю╫Щ╫У╫в - ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ю╫в╫С╫и ╫Ь╫б╫Ь╫Щ╫з╫к ╫Р╫й╫и╫Р╫Щ, ╫Щ╫й ╫Ь╫й╫Ь╫С ╫в╫Э ╫з╫и╫Щ╫Р╫Х╫к ╫Ь
     * ```
     * await call.blockRunningUntilNextRequest();
     * ```
     */
    send: (resp: string) => Response<string>
    /**
     * ╫Ю╫Ы╫Щ╫Ь ╫Р╫к ╫Ы╫Ь ╫Ф╫д╫и╫Ю╫Ш╫и╫Щ╫Э ╫й╫а╫й╫Ь╫Ч╫Х ╫Ю╫Щ╫Ю╫Х╫к<br>
     * ╫Р╫Э ╫Ф╫С╫з╫й╫Ф ╫а╫й╫Ь╫Ч╫Ф ╫С-тАл`HTTP GET`, ╫Щ╫Ы╫Щ╫Ь ╫Р╫к ╫ФтАл`query string`<br>
     * ╫Р╫Э ╫Ф╫С╫з╫й╫Ф ╫а╫й╫Ь╫Ч╫Ф ╫С-тАл`HTTP POST` (тАл`api_url_post=yes`), ╫Щ╫Ы╫Щ╫Ь ╫Р╫к ╫ФтАл`body`
     */
    values: Readonly<Record<string, string>>
    /**
     * ╫С╫и╫Щ╫и╫Х╫к ╫Ю╫Ч╫У╫Ь - ╫С╫и╫Ю╫к ╫й╫Щ╫Ч╫Ф (╫У╫Х╫и╫б ╫Р╫к ╫Ф╫С╫и╫Щ╫и╫Х╫к ╫Ю╫Ч╫У╫Ь ╫С╫и╫Ю╫к ╫и╫Р╫Х╫Ш╫и)
     */
    defaults: Defaults
    req: Request
    /**
     * ╫Ю╫б╫д╫и ╫Ф╫Ш╫Ь╫д╫Х╫Я **╫Ф╫и╫Р╫й╫Щ** ╫й╫Ь ╫Ф╫Ю╫в╫и╫Ы╫к<br>
     * ╫з╫Щ╫ж╫Х╫и ╫й╫Ь тАл{@link ApiDID|`call.ApiDID`}
     */
    did: string
    /**
     * ╫Ю╫б╫д╫и ╫Ф╫Ш╫Ь╫д╫Х╫Я ╫й╫Ь ╫Ф╫Ю╫Ч╫Щ╫Щ╫Т<br>
     * ╫з╫Щ╫ж╫Х╫и ╫й╫Ь тАл{@link ApiPhone|`call.ApiPhone`}
     */
    phone: string
    /**
     * ╫Ф╫Ю╫б╫д╫и ╫Р╫Ь╫Щ╫Х ╫Ч╫Щ╫Щ╫Т ╫Ф╫Ю╫й╫к╫Ю╫й<br>
     * ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Щ╫й ╫Ы╫Ю╫Ф ╫Ю╫б╫д╫и╫Щ╫Э ╫Ь╫Ю╫в╫и╫Ы╫к ╫й╫Ь╫Ы╫Э, ╫Х╫Ф╫Ь╫з╫Х╫Ч ╫ж╫Ь╫ж╫Ь ╫Ь╫Ю╫б╫д╫и ╫Ю╫й╫а╫Ф, ╫Ф╫в╫и╫Ъ ╫Ф╫Ц╫Ф ╫Щ╫Ф╫Щ╫Ф ╫й╫Х╫а╫Ф ╫Ю╫Ф╫в╫и╫Ъ ╫Ф╫з╫Х╫У╫Э<br>
     * ╫з╫Щ╫ж╫Х╫и ╫й╫Ь тАл{@link ApiRealDID|`call.ApiRealDID`}
     */
    real_did: string
    /**
     * ╫Ю╫Ц╫Ф╫Ф ╫Щ╫Щ╫Ч╫Х╫У╫Щ ╫Ь╫Р╫Х╫и╫Ъ ╫Ф╫й╫Щ╫Ч╫Ф<br>
     * ╫з╫Щ╫ж╫Х╫и ╫й╫Ь тАл{@link ApiCallId|`call.ApiCallId`}
     */
    callId: string
    /**
     * ╫й╫Э ╫Ф╫к╫Щ╫з╫Щ╫Щ╫Ф/╫й╫Ь╫Х╫Ч╫Ф ╫С╫Ф ╫а╫Ю╫ж╫Р ╫Ф╫Ю╫й╫к╫Ю╫й<br>
     * ╫з╫Щ╫ж╫Х╫и ╫й╫Ь тАл{@link ApiExtension|`call.ApiExtension`}
     * @example "9" - ╫й╫Ь╫Х╫Ч╫Ф 9 ╫С╫к╫д╫и╫Щ╫Ш ╫Ф╫и╫Р╫й╫Щ
     * @example "" - ╫й╫Ь╫Х╫Ч╫Ф ╫и╫Р╫й╫Щ╫к
     */
    extension: string
    /**
     * ╫Ю╫Ц╫Ф╫Ф ╫Щ╫Щ╫Ч╫Х╫У╫Щ ╫Ь╫Р╫Х╫и╫Ъ ╫Ф╫й╫Щ╫Ч╫Ф
     * <hr>
     * @see {@link callId|`call.callId`} (╫з╫Щ╫ж╫Х╫и ╫Ь╫а╫Х╫Ч╫Х╫к)
     */
    ApiCallId: string
    /**
     * ╫Ю╫б╫д╫и ╫Ф╫Ш╫Ь╫д╫Х╫Я ╫й╫Ь ╫Ф╫Ю╫Ч╫Щ╫Щ╫Т
     * <hr>
     * @see {@link phone|`call.phone`} (╫з╫Щ╫ж╫Х╫и ╫Ь╫а╫Х╫Ч╫Х╫к)
     */
    ApiPhone: string
    /**
     * ╫Ю╫б╫д╫и ╫Ф╫Ш╫Ь╫д╫Х╫Я **╫Ф╫и╫Р╫й╫Щ** ╫й╫Ь ╫Ф╫Ю╫в╫и╫Ы╫к
     * <hr>
     * @see {@link did|`call.did`} (╫з╫Щ╫ж╫Х╫и ╫Ь╫а╫Х╫Ч╫Х╫к)
     */
    ApiDID: string
    /**
     * ╫Ф╫Ю╫б╫д╫и ╫Р╫Ь╫Щ╫Х ╫Ч╫Щ╫Щ╫Т ╫Ф╫Ю╫й╫к╫Ю╫й<br>
     * ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Щ╫й ╫Ы╫Ю╫Ф ╫Ю╫б╫д╫и╫Щ╫Э ╫Ь╫Ю╫в╫и╫Ы╫к ╫Х╫Ф╫Ь╫з╫Х╫Ч ╫Ч╫Щ╫Щ╫Т ╫Ь╫Ю╫б╫д╫и ╫Ю╫й╫а╫Ф, ╫Ф╫в╫и╫Ъ ╫Ф╫Ц╫Ф ╫Щ╫Ф╫Щ╫Ф ╫й╫Х╫а╫Ф ╫Ю тАл{@link ApiDID|`call.ApiDID`}
     * <hr>
     * @see {@link real_did|`call.real_did`} (╫з╫Щ╫ж╫Х╫и ╫Ь╫а╫Х╫Ч╫Х╫к)
     */
    ApiRealDID: string
    /**
     * ╫й╫Э ╫Ф╫к╫Щ╫з╫Щ╫Щ╫Ф/╫й╫Ь╫Х╫Ч╫Ф ╫С╫Ф ╫а╫Ю╫ж╫Р ╫Ф╫Ю╫й╫к╫Ю╫й
     * <hr>
     * @see {@link extension|`call.extension`} (╫з╫Щ╫ж╫Х╫и ╫Ь╫а╫Х╫Ч╫Х╫к)
     * @example "9" - ╫й╫Ь╫Х╫Ч╫Ф 9 ╫С╫к╫д╫и╫Щ╫Ш ╫Ф╫и╫Р╫й╫Щ
     * @example "" - ╫й╫Ь╫Х╫Ч╫Ф ╫и╫Р╫й╫Щ╫к
    */
    ApiExtension: string
    /**
     * ╫С╫Ю╫Щ╫У╫Ф ╫Х╫С╫Х╫ж╫в╫Ф ╫Ф╫к╫Ч╫С╫и╫Х╫к ╫Ь╫д╫Щ ╫Ц╫Щ╫Ф╫Х╫Щ ╫Р╫Щ╫й╫Щ, ╫Щ╫ж╫Х╫и╫г ╫в╫и╫Ъ ╫Ц╫Ф ╫Ф╫Ю╫Ы╫Щ╫Ь ╫Р╫к ╫б╫Х╫Т ╫Ф╫Ф╫к╫Ч╫С╫и╫Х╫к ╫Х╫Ф-ID ╫й╫Ь ╫Ф╫Ю╫й╫к╫Ю╫й (╫Ю╫Щ╫У╫в ╫а╫Х╫б╫г [╫Ы╫Р╫Я](https://f2.freeivr.co.il/post/1250))
     */
    ApiEnterID: string
    /**
     * ╫й╫Э ╫Ю╫й╫Х╫Щ╫Ъ ╫Ь╫Ц╫Щ╫Ф╫Х╫Щ ╫Ф╫Р╫Щ╫й╫Щ (╫Ы╫д╫Щ ╫й╫Ю╫Х╫б╫С╫и ╫С╫в╫и╫Ъ ╫й╫Ь `login_add_val_name=yes` [╫Ы╫Р╫Я](https://f2.freeivr.co.il/post/2015))
     */
    ApiEnterIDName: string
    /**
     * ╫Ц╫Ю╫Я ╫С╫й╫а╫Щ╫Х╫к ╫Ю1970, Epoch, i.e., since 1970-01-01 00:00:00 UTC
     * @example "1683594518"
     */
    ApiTime: string
    /**
     * ╫Ц╫Ф╫Ф ╫Ь`callId` ╫й╫Ь ╫Фcalls ╫СAPI `GetCallsStatus`
     */
    ApiYFCallId: string
}

/**
 * ╫Ю╫Щ╫Щ╫ж╫Т "╫Ф╫Х╫У╫в╫Ф" ╫Ф╫а╫Щ╫к╫а╫к ╫Ь╫Ф╫й╫Ю╫в╫Ф ╫СтАл`read`/`id_list_message`
 */
export interface Msg {
    type: 'file' | 'text' | 'speech' | 'digits' | 'number' | 'alpha' | 'zmanim' | 'go_to_folder' | 'system_message' | 'music_on_hold' | 'date' | 'dateH'
    data: string | number | SystemMessageCode | { time?: string, zone?: string, difference?: string } | { musicName: string, maxSec?: number }
     /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫б╫Щ╫и ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э (`.`,`-`,`'`,`"`,`&`) ╫Ю╫к╫й╫Х╫С╫Х╫к ╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш<br>
     * ,╫С╫Р╫Э ╫Ь╫Р ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь), ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫С╫Р╫Э ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф тАл(`true`) ╫Ф╫к╫Х╫Х╫Щ╫Э ╫Щ╫Х╫б╫и╫Х ╫Ю╫Ф╫к╫й╫Х╫С╫Ф ╫й╫к╫Х╫Ч╫Ц╫и ╫Ь╫Щ╫Ю╫Х╫к ╫Х╫Ь╫Р ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫Ц╫Ф ╫С3 ╫и╫Ю╫Х╫к, ╫и╫Р╫Х [╫к╫Щ╫в╫Х╫У ╫Ю╫Ь╫Р](https://github.com/ShlomoCode/yemot-router2#%D7%AA%D7%95%D7%95%D7%99%D7%9D-%D7%9C%D7%90-%D7%97%D7%95%D7%A7%D7%99%D7%99%D7%9D-%D7%91%D7%94%D7%A7%D7%A8%D7%90%D7%AA-%D7%98%D7%A7%D7%A1%D7%98)
     * @default false
     */
    removeInvalidChars?: boolean
}

interface GeneralReadOptions {
    /**
     * ╫й╫ЭтАл ╫Ф╫д╫и╫Ю╫Ш╫и ╫СURL ╫й╫С╫Х ╫Щ╫ж╫Х╫и╫г ╫Ф╫в╫и╫Ъ ╫й╫Ф╫Ю╫й╫к╫Ю╫й ╫Ф╫з╫Щ╫й<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫а╫з╫С╫в ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к: тАл`val_1`, `val_2`, `val_3` ╫Х╫Ы╫Х' ╫С╫б╫У╫и ╫в╫Х╫Ь╫Ф
     */
    val_name?: string
    /**
     * ╫Ф╫Р╫Э ╫Ь╫С╫з╫й ╫Р╫к ╫Ф╫в╫и╫Ъ ╫й╫Х╫С ╫Р╫Э ╫Ф╫д╫и╫Ю╫Ш╫и ╫С╫й╫Э ╫й╫а╫С╫Ч╫и тАл({@link GeneralReadOptions.val_name|`val_name`}) ╫Ы╫С╫и ╫з╫Щ╫Щ╫Э тАл╫СURL<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫Ф╫Ю╫в╫и╫Ы╫к ╫к╫С╫з╫й ╫Ю╫Ч╫У╫й, ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ю╫Х╫Т╫У╫и тАл`true` ╫С╫в╫и╫Ъ ╫Ц╫Ф, ╫Ф╫Ю╫в╫и╫Ы╫к ╫к╫й╫к╫Ю╫й ╫С╫в╫и╫Ъ ╫Ф╫з╫Х╫У╫Э ╫й╫Ф╫Х╫з╫й ╫Х╫к╫й╫Ь╫Ч ╫Р╫Х╫к╫Х ╫С╫к╫Х╫и ╫к╫й╫Х╫С╫Ф
     */
    re_enter_if_exists?: boolean
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫б╫Щ╫и ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э (`.`,`-`,`'`,`"`,`&`) ╫Ю╫к╫й╫Х╫С╫Х╫к ╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш<br>
     * ,╫С╫Р╫Э ╫Ь╫Р ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь), ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫С╫Р╫Э ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф тАл(`true`) ╫Ф╫к╫Х╫Х╫Щ╫Э ╫Щ╫Х╫б╫и╫Х ╫Ю╫Ф╫к╫й╫Х╫С╫Ф ╫й╫к╫Х╫Ч╫Ц╫и ╫Ь╫Щ╫Ю╫Х╫к ╫Х╫Ь╫Р ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫Ц╫Ф ╫С3 ╫и╫Ю╫Х╫к, ╫и╫Р╫Х [╫к╫Щ╫в╫Х╫У ╫Ю╫Ь╫Р](https://github.com/ShlomoCode/yemot-router2#%D7%AA%D7%95%D7%95%D7%99%D7%9D-%D7%9C%D7%90-%D7%97%D7%95%D7%A7%D7%99%D7%99%D7%9D-%D7%91%D7%94%D7%A7%D7%A8%D7%90%D7%AA-%D7%98%D7%A7%D7%A1%D7%98)
     * @default false
     */
    removeInvalidChars?: boolean
}

export interface TapOptions extends GeneralReadOptions {
    /**
     * ╫Ы╫Ю╫Х╫к ╫Ф╫б╫д╫и╫Х╫к ╫Ф╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ╫к ╫й╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Х╫Ы╫Ь ╫Ь╫Ф╫з╫Щ╫й<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ь╫Ь╫Р ╫Ф╫Т╫С╫Ь╫Ф
     */
    max_digits?: number
    /**
     * ╫Ы╫Ю╫Х╫к ╫б╫д╫и╫Х╫к ╫Ю╫Щ╫а╫Щ╫Ю╫Ь╫Щ╫к<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: 1
     * @default 1
     */
    min_digits?: number
    /**
     * ╫Ц╫Ю╫Я ╫Ф╫Ю╫к╫а╫Ф ╫Ь╫Ф╫з╫й╫Ф ╫С╫й╫а╫Щ╫Х╫к<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: 7 ╫й╫а╫Щ╫Х╫к
     * @default 7
     */
    sec_wait?: number
    /**
     * ╫ж╫Х╫и╫к ╫Ф╫Ф╫й╫Ю╫в╫Ф ╫Ь╫Ю╫й╫к╫Ю╫й ╫Р╫к ╫Ф╫з╫й╫Х╫к╫Щ╫Х<br>
     * ╫С╫Р╫Э ╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫С╫Ю╫з╫Ь╫У╫к ╫й╫Х╫а╫Ф ╫Ю╫Ю╫з╫Ь╫У╫к ╫б╫д╫и╫Х╫к, ╫Ы╫Т╫Х╫Я тАл`EmailKeyboard` ╫Р╫Х тАл`HebrewKeyboard`, ╫Щ╫й ╫Ь╫Ф╫Ы╫а╫Щ╫б ╫Ы╫Р╫Я ╫Р╫к ╫б╫Х╫Т ╫Ф╫Ю╫з╫Ь╫У╫к [╫и╫Р╫Х example.js]<br>
     * ╫д╫Щ╫и╫Х╫Ш ╫в╫Ь ╫Ы╫Ь ╫Р╫Х╫д╫ж╫Щ╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ю╫ж╫Х╫Р ╫С╫к╫Щ╫в╫Х╫У ╫Ю╫Х╫У╫Х╫Ь API ╫й╫Ь ╫Щ╫Ю╫Х╫к ╫Ф╫Ю╫й╫Щ╫Ч, ╫к╫Ч╫к"╫Ф╫в╫и╫Ъ ╫Ф╫й╫Щ╫й╫Щ (╫Ф╫з╫й╫Ф)".
     * @default "No"
     */
    typing_playback_mode?: 'Number' | 'Digits' | 'File' | 'TTS' | 'Alpha' | 'No' | 'HebrewKeyboard' | 'EmailKeyboard' | 'EnglishKeyboard' | 'DigitsKeyboard' | 'TeudatZehut' | 'Price' | 'Time' | 'Phone' | 'No'
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫Ю╫з╫й ╫Ы╫Х╫Ы╫С╫Щ╫к
     * @default false
     */
    block_asterisk_key?: boolean
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫Ю╫з╫й ╫Р╫д╫б
     * @default false
     */
    block_zero_key?: boolean
    /**
     * ╫Ф╫Ч╫Ь╫д╫к ╫к╫Х╫Х╫Щ╫Э
     * ╫Ф╫Ч╫Ь╫д╫к ╫Ю╫з╫й ╫С╫Ы╫Ь ╫б╫Щ╫Ю╫Я ╫Р╫Ч╫и<br>
     * ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Р╫к╫Э ╫и╫Х╫ж╫Щ╫Э ╫й╫Щ╫й╫Ь╫Ч ╫Ы╫к╫Х╫С╫к ╫б╫д╫и╫Щ╫Ф ╫Ы╫Р╫й╫и ╫Ф╫Ю╫д╫и╫Щ╫У ╫С╫Щ╫Я ╫Ф╫к╫Щ╫з╫Щ╫Х╫к ╫Ф╫Х╫Р ╫б╫Ь╫й тАл(/)<br>
     * ╫С╫Ш╫Ь╫д╫Х╫Я ╫Ь╫Р ╫а╫Щ╫к╫Я ╫Ь╫Ф╫з╫Щ╫й ╫б╫Ь╫й, ╫Р╫С╫Ь ╫а╫Щ╫к╫Я ╫Ь╫С╫з╫й ╫Ю╫Ф╫Ь╫з╫Х╫Ч ╫Ь╫Ф╫з╫Щ╫й ╫Ы╫Х╫Ы╫С╫Щ╫к ╫С╫Щ╫Я ╫к╫Щ╫з╫Щ╫Щ╫Ф ╫Ь╫к╫Щ╫з╫Щ╫Щ╫Ф, ╫Х╫Ь╫б╫Ю╫Я ╫Ь╫Ф╫Ч╫Ь╫Щ╫г ╫Р╫к ╫Ф╫Ы╫Х╫Ы╫С╫Щ╫к ╫С╫б╫Ь╫й<br>
     * ╫в╫и╫Ъ ╫Ц╫Ф ╫Щ╫Ы╫Х╫Ь ╫Ь╫Ф╫Ы╫Щ╫Ь 2 ╫б╫Щ╫Ю╫а╫Щ╫Э: ╫Ф╫б╫Щ╫Ю╫Я ╫Ф╫и╫Р╫й╫Х╫Я ╫Р╫к ╫Р╫Щ╫Ц╫Ф ╫в╫и╫Ъ ╫Ь╫Ф╫Ч╫Ь╫Щ╫г, ╫Ф╫б╫Щ╫Ю╫Я ╫Ф╫й╫а╫Щ ╫Ц╫Ф ╫Ю╫Ф ╫Ь╫й╫Щ╫Э ╫С╫Ю╫з╫Х╫Э ╫Ю╫Ф ╫й╫Ф╫Х╫Ч╫Ь╫г<br>
     * @example "*@""
     * ╫Ы╫Ь╫Х╫Ю╫и ╫Ь╫Ф╫Ч╫Ь╫Щ╫г ╫Р╫к ╫Ю╫з╫й ╫Ы╫Х╫Ы╫С╫Щ╫к ╫С╫б╫Ь╫й
     */
    replace_char?: string
    /**
     *  ╫Р╫Щ╫Ц╫Ф ╫Ю╫з╫й╫Щ╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Х╫Ы╫Ь ╫Ь╫Ф╫з╫Щ╫й<br>
     * ╫С╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫з╫Щ╫й ╫Ю╫з╫й ╫й╫Ь╫Р ╫Ф╫Х╫Т╫У╫и ╫Ф╫Ю╫в╫и╫Ы╫к ╫к╫Х╫У╫Щ╫в тАлтАл`M1224` "╫С╫Ч╫Щ╫и╫Ф ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫к"<br>
     * 
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Ы╫Х╫Ь ╫Ь╫Ф╫з╫Щ╫й ╫в╫Ь ╫Ы╫Ь ╫Ф╫Ю╫з╫й╫Щ╫Э<br>
     * @example [1, 2, '3', '*']
     * @example [10, 20, 30, 40]
     */
    digits_allowed?: Array<number | string>
    /** 
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ф╫Ю╫й╫к╫Ю╫й ╫Ь╫Р ╫Ф╫з╫Щ╫й ╫Ы╫Ь╫Х╫Э ╫Х╫в╫С╫и ╫Ф╫Ц╫Ю╫Я ╫й╫Ф╫Х╫Т╫У╫и ╫Ь╫Ф╫з╫й╫Ф тАл({@link TapOptions.sec_wait}) ╫Ф╫а╫к╫Х╫Я ╫й╫Ф╫Ю╫в╫и╫Ы╫к ╫з╫Х╫Ь╫Ш╫к ╫Ф╫Х╫Р ╫и╫Щ╫з<br>
     * ╫Ы╫Ю╫Х╫к ╫Ф╫д╫в╫Ю╫Щ╫Э ╫й╫Ф╫Ю╫в╫и╫Ы╫к ╫Ю╫й╫Ю╫Щ╫в╫Ф ╫Р╫к ╫Ф╫й╫Р╫Ь╫Ф ╫Ь╫д╫а╫Щ ╫й╫Ф╫Щ╫Р ╫Ю╫Т╫У╫Щ╫и╫Ф ╫Р╫к ╫Ф╫а╫к╫Х╫Я ╫Ы"╫и╫Щ╫з" ╫Ф╫Щ╫Р ╫д╫в╫Э ╫Р╫Ч╫к
     * ╫С╫в╫и╫Ъ ╫Ц╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫Ы╫Ю╫Х╫к ╫д╫в╫Ю╫Щ╫Э ╫й╫Х╫а╫Ф
     * @see {@link TapOptions.allow_empty}
     * @default 1
     */
    amount_attempts?: number
    /**
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь, ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ф╫а╫к╫Х╫Я ╫й╫Ф╫к╫з╫С╫Ь ╫Ф╫Х╫Р "╫и╫Щ╫з" (╫и╫Р╫Ф {@link TapOptions.amount_attempts}) ╫Ф╫Ю╫в╫и╫Ы╫к ╫Ю╫й╫Ю╫Щ╫в╫Ф `M1002` "╫Ь╫Р ╫Ф╫Х╫з╫й╫Ф ╫С╫Ч╫Щ╫и╫Ф" ╫Х╫Ф╫Ю╫й╫к╫Ю╫й ╫в╫Х╫С╫и ╫Ь╫Ф╫з╫й╫Ф ╫Ю╫Ч╫Х╫У╫й╫к ╫й╫Ь ╫Ф╫а╫к╫Х╫Я
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫й╫Р╫Э ╫Ф╫а╫к╫Х╫Я ╫и╫Щ╫з ╫Ф╫Ю╫в╫и╫Ы╫к ╫к╫к╫з╫У╫Э ╫Ф╫Ь╫Р╫Ф
     * @default false
     * @see {@link TapOptions.empty_val}
     */
    allow_empty?: boolean
    /**
     * ╫Ф╫в╫и╫Ъ ╫й╫Щ╫Щ╫й╫Ь╫Ч ╫Ы╫й╫Ь╫Р ╫Ф╫Х╫з╫й╫Ф ╫к╫й╫Х╫С╫Ф. ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: тАл`"None"`<br>
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫в╫С╫Щ╫и ╫Т╫Э ╫в╫и╫Ы╫Щ╫Э ╫й╫Р╫Щ╫а╫Э ╫Ю╫Ч╫и╫Х╫Ц╫к, ╫Ь╫У╫Х╫Т╫Ю╫Ф тАл`null` ╫Х╫Ф╫в╫и╫Ъ ╫й╫Щ╫к╫з╫С╫Ь ╫Ю╫ФтАлread ╫Щ╫Ф╫Щ╫Ф тАл`null` ╫Х╫Ь╫Р тАл`"null"`
     * <hr>
     * 
     * :╫Ь╫Ю╫й╫к╫Ю╫й╫Щ ╫Ш╫Щ╫Щ╫д╫б╫з╫и╫Щ╫д╫Ш ╫С╫Ь╫С╫У
     * ---------------
     * ╫Ы╫Р╫й╫и ╫Ю╫Т╫У╫Щ╫и╫Щ╫Э тАл`empty_val` ╫й╫Р╫Щ╫а╫Х ╫Ю╫б╫Х╫Т тАл`string`, ╫Ы╫и╫Т╫в тАл╫ФтАлDTS ╫Ь╫Р ╫Ю╫Х╫Т╫У╫и ╫Ь╫Ф╫б╫Щ╫з ╫Р╫к ╫Ф╫Ш╫Щ╫Щ╫д ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к, ╫Х╫Щ╫й ╫Ь╫Ф╫Т╫У╫Щ╫и ╫Р╫Х╫к╫Х ╫Щ╫У╫а╫Щ╫к ╫в╫Э тАл`as`, ╫У╫Х╫Т╫Ю╫Ф:
     * ```ts
     * const res = await call.read([{ type: 'text', data: 'please type one' }], 'tap', {
     *     allow_empty: true,
     *     empty_val: null,
     * }) as string | null;
     * ```
     * <hr>
     * @default "None"
     */
    empty_val?: any
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫й╫Щ╫а╫Х╫Щ ╫Ю╫ж╫С ╫Ф╫з╫Ь╫У╫Ф<br>
     * ╫С╫Р╫Э ╫Ф╫Х╫Т╫У╫и ╫СтАл{@link typing_playback_mode} ╫Ю╫ж╫С ╫Ю╫з╫Ь╫У╫к,
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Ы╫Х╫Ь ╫С╫к╫д╫и╫Щ╫Ш ╫б╫Щ╫Х╫Э ╫Р╫Х ╫С╫Щ╫Ш╫Х╫Ь (╫С╫Ю╫з╫й ╫Ы╫Х╫Ы╫С╫Щ╫к) ╫Ь╫й╫а╫Х╫к ╫Р╫к ╫б╫Х╫Т ╫Ф╫Ю╫з╫Ь╫У╫к.<br>
     * ╫С╫Р╫Э ╫Ф╫Т╫У╫и╫Ф ╫Ц╫Х ╫Ю╫Х╫д╫в╫Ь╫к, ╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫Ю╫а╫б╫Ф ╫Ь╫й╫а╫Х╫к ╫й╫д╫Ф ╫Ф╫Р╫Х╫д╫ж╫Щ╫Ф ╫к╫Щ╫Ч╫б╫Э, ╫Х╫Ф╫Ю╫в╫и╫Ы╫к ╫к╫й╫Ю╫Щ╫в тАл`M4186` "╫й╫Щ╫а╫Х╫Щ ╫й╫д╫к ╫Ф╫з╫Ь╫У╫Ф ╫Ч╫б╫Х╫Э ╫С╫Ы╫к╫Щ╫С╫Ф ╫Ц╫Х"
     * @default false
     */
    block_change_keyboard?: boolean
}

export interface SstOptions extends GeneralReadOptions {
    /**
     * ╫й╫д╫Ф ╫Ь╫Ц╫Щ╫Ф╫Х╫Щ ╫Ф╫У╫Щ╫С╫Х╫и<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫в╫С╫и╫Щ╫к (╫Р╫Х ╫Ю╫Ф ╫й╫Ф╫Х╫Т╫У╫и ╫С╫в╫и╫Ъ тАл`lang` ╫С╫й╫Ь╫Х╫Ч╫Ф)<br>
     * [╫и╫й╫Щ╫Ю╫к ╫Ф╫й╫д╫Х╫к ╫Ф╫а╫к╫Ю╫Ы╫Х╫к](https://drive.google.com/file/d/1UC_KOjhZgPWZff8BcUfBLwMbSmKewy8A/view)
     */
    lang?: string
    /**
     * ╫й╫Ь╫Р ╫Щ╫Ф╫Щ╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ф╫з╫Щ╫й ╫С╫Ю╫з╫Х╫Э ╫Ь╫У╫С╫и<br>
     * (╫С╫и╫Щ╫и╫к ╫Ф╫Ю╫Ч╫У╫Ь ╫Ф╫Щ╫Р ╫й╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Ы╫Х╫Ь ╫Р╫Х ╫Ь╫У╫С╫и ╫Р╫Х ╫Ь╫Ф╫з╫Щ╫й)
     * @default false
     */
    block_typing?: boolean
    /**
     * ╫Ы╫Ю╫Х╫к ╫Ф╫б╫д╫и╫Х╫к ╫Ф╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ╫к ╫й╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Х╫Ы╫Ь ╫Ь╫Ф╫з╫Щ╫й<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Р╫Щ╫Я ╫Ф╫Т╫С╫Ь╫Ф
     */
    max_digits?: number
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫Ю╫а╫Х╫в ╫Ц╫Щ╫Ф╫Х╫Щ ╫У╫Щ╫С╫Х╫и ╫й╫Ь ╫Ф╫з╫Ь╫Ш╫Х╫к (╫к╫Х╫Ю╫Ъ ╫С╫Ц╫Щ╫Ф╫Х╫Щ ╫Р╫и╫Х╫Ъ, ╫Р╫Ъ ╫Ь╫Р ╫Ю╫Р╫д╫й╫и ╫Р╫Х ╫Ф╫з╫й╫Ф ╫Р╫Х ╫У╫Щ╫С╫Х╫и)<br>
     * @default false
     */
    use_records_recognition_engine?: boolean
    /**
     * ╫Р╫Ч╫и╫Щ ╫Ы╫Ю╫Ф ╫й╫а╫Щ╫Х╫к ╫й╫Ь ╫й╫з╫Ш ╫Ь╫б╫Щ╫Щ╫Э ╫Р╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫Ь╫Р ╫Ю╫д╫б╫Щ╫з)<br>
     * ╫и╫Ь╫Х╫Х╫а╫Ш╫Щ ╫и╫з ╫Р╫Э ╫Ю╫й╫к╫Ю╫й╫Щ╫Э ╫С╫Ю╫а╫Х╫в ╫Ц╫Щ╫Ф╫Х╫Щ ╫Ш╫з╫б╫Ш╫Щ╫Э ╫Р╫и╫Х╫Ы╫Щ╫Э тАл({@link use_records_recognition_engine})
    */
   quiet_max?: number
    /**
    * ╫Ю╫б╫д╫и ╫й╫а╫Щ╫Х╫к ╫Ю╫и╫С╫Щ ╫Ь╫Ф╫з╫Ь╫Ш╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Ь╫Ь╫Р ╫Ф╫Т╫С╫Ь╫Ф)
    */
    length_max?: number
}

export interface RecordOptions extends GeneralReadOptions {
    /**
     * (╫Ф╫Щ╫Ы╫Я ╫к╫Щ╫й╫Ю╫и ╫Ф╫Ф╫з╫Ь╫Ш╫Ф ╫С╫Ю╫в╫и╫Ы╫к (╫а╫к╫Щ╫С ╫Ь╫к╫з╫Щ╫Ф, ╫й╫Э ╫Ф╫з╫Х╫С╫е ╫Ю╫Х╫Т╫У╫и ╫С╫а╫д╫и╫У<br>
     * 
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫а╫й╫Ю╫и╫к ╫С╫к╫Щ╫з╫Щ╫Щ╫Ф ╫й╫Ю╫Х╫Т╫У╫и╫к ╫С тАл`api_dir` ╫С╫й╫Ь╫Х╫Ч╫Ф (╫Ы╫Ь╫Х╫Ю╫и ╫к╫з╫Щ╫Щ╫Ф ╫а╫Х╫Ы╫Ч╫Щ╫к ╫С╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь)<br>
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫Ю╫Щ╫з╫Х╫Э ╫й╫Х╫а╫Ф, ╫Ь╫У╫Х╫Т╫Ю╫Ф тАл`8/` = ╫й╫Ь╫Х╫Ч╫Ф 8 ╫С╫к╫д╫и╫Щ╫Ш ╫Ф╫и╫Р╫й╫Щ<br>
     * ╫Ф╫в╫и╫Ф: ╫Ч╫Х╫С╫Ф ╫Ь╫й╫Щ╫Э `/` ╫С╫Ф╫к╫Ч╫Ь╫Ф, ╫Р╫б╫Х╫и ╫Ь╫й╫Щ╫Э `/` ╫С╫б╫Х╫г
     */
    path?: string
    /**
     * ╫й╫Э ╫Ф╫з╫Х╫С╫е ╫й╫Щ╫Щ╫й╫Ю╫и (**╫Ь╫Ь╫Р ╫б╫Щ╫Х╫Ю╫к**)<br>
     * ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫Ю╫Щ╫б╫д╫Х╫и ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ ╫Ы╫з╫Х╫С╫е ╫Ф╫Т╫С╫Х╫Ф ╫С╫й╫Ь╫Х╫Ч╫Ф<br>
     * ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Р╫Э ╫Ф╫з╫Х╫С╫е ╫Ф╫Ы╫Щ ╫Т╫С╫Х╫Ф ╫С╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫Щ╫Ф 100, ╫Ф╫з╫Х╫С╫е ╫Ф╫Ч╫У╫й ╫Щ╫Ф╫Щ╫Ф 101
     */
    file_name?: string
    /**
     * ╫Ф╫Р╫Э ╫Ь╫й╫Ю╫Х╫и ╫Р╫к ╫Ф╫з╫Х╫С╫е ╫С╫б╫Щ╫Х╫Э ╫Щ╫й╫Щ╫и╫Х╫к, ╫Ь╫Ь╫Р ╫к╫д╫и╫Щ╫Ш ╫й╫Ю╫Щ╫в╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф/╫Р╫Щ╫й╫Х╫и/╫Ф╫з╫Ь╫Ш╫Ф ╫Ю╫Ч╫У╫й/╫Ф╫Ю╫й╫Ъ ╫Ф╫з╫Ь╫Ш╫Ф
     * @default false
     */
    no_confirm_menu?: boolean
    /**
     * @default true
     * ╫Ф╫Р╫Э ╫Ь╫й╫Ю╫Х╫и ╫Р╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф ╫Ь╫з╫Х╫С╫е ╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫а╫Щ╫к╫з ╫С╫Р╫Ю╫ж╫в ╫Ф╫Ф╫з╫Ь╫Ш╫Ф
     */
    save_on_hangup?: boolean
    /**
     * ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ф╫Х╫Т╫У╫и ╫й╫Э ╫з╫Х╫С╫е ╫Ь╫й╫Ю╫Щ╫и╫Ф (file_name) ╫Х╫Ы╫С╫и ╫з╫Щ╫Щ╫Э ╫з╫Х╫С╫е ╫С╫й╫Э ╫й╫а╫С╫Ч╫и<br>
     * ╫Ф╫Р╫Э ╫Ь╫й╫а╫Х╫к ╫Р╫к ╫й╫Э ╫Ф╫з╫Х╫С╫е ╫Ф╫Щ╫й╫Я ╫Х╫Ь╫й╫Ю╫Х╫и ╫Р╫к ╫Ф╫Ч╫У╫й ╫С╫й╫Э ╫й╫а╫С╫Ч╫и (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь)<br>
     * ╫Р╫Х ╫Ь╫ж╫и╫г ╫Р╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф ╫Ф╫Ч╫У╫й╫Ф ╫Ь╫б╫Х╫г ╫Ф╫з╫Х╫С╫е ╫Ф╫Щ╫й╫Я
     * @default false 
     */
    append_to_existing_file?: boolean
    /**
     * (╫Ы╫Ю╫Х╫к ╫й╫а╫Щ╫Х╫к ╫Ю╫Щ╫а╫Щ╫Ю╫Ь╫Щ╫к ╫Ь╫Ф╫з╫Ь╫Ш╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Р╫Щ╫Я ╫Ю╫Щ╫а╫Щ╫Ю╫Х╫Э
     */
    min_length?: number
    /**
     * (╫Ы╫Ю╫Х╫к ╫й╫а╫Щ╫Х╫к ╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ╫к ╫Ь╫Ф╫з╫Ь╫Ш╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Р╫Щ╫Я ╫Ю╫з╫б╫Щ╫Ю╫Х╫Э
     */
    max_length?: number
}

interface IdListMessageOptions {
    /**
     * ╫Ф╫Р╫Э ╫Ь╫Ф╫б╫Щ╫и ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э (`.`,`-`,`'`,`"`,`&`) ╫Ю╫к╫й╫Х╫С╫Х╫к ╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш<br>
     * ,╫С╫Р╫Э ╫Ь╫Р ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь), ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫С╫Р╫Э ╫Ю╫Х╫Т╫У╫и╫к ╫Ф╫б╫и╫Ф тАл(`true`) ╫Ф╫к╫Х╫Х╫Щ╫Э ╫Щ╫Х╫б╫и╫Х ╫Ю╫Ф╫к╫й╫Х╫С╫Ф ╫й╫к╫Х╫Ч╫Ц╫и ╫Ь╫Щ╫Ю╫Х╫к ╫Х╫Ь╫Р ╫к╫Щ╫Ц╫и╫з ╫й╫Т╫Щ╫Р╫Ф<br>
     * ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫Ц╫Ф ╫С3 ╫и╫Ю╫Х╫к, ╫и╫Р╫Х [╫к╫Щ╫в╫Х╫У ╫Ю╫Ь╫Р](https://github.com/ShlomoCode/yemot-router2#%D7%AA%D7%95%D7%95%D7%99%D7%9D-%D7%9C%D7%90-%D7%97%D7%95%D7%A7%D7%99%D7%99%D7%9D-%D7%91%D7%94%D7%A7%D7%A8%D7%90%D7%AA-%D7%98%D7%A7%D7%A1%D7%98)
     * @default false
     */
    removeInvalidChars?: boolean
    /**
     * ╫Щ╫й ╫Ь╫Ф╫Т╫У╫Щ╫и ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫Ь╫й╫и╫й╫и ╫д╫в╫Х╫Ь╫Х╫к ╫а╫Х╫б╫д╫Х╫к (╫Ь╫У╫Х╫Т╫Ю╫Ф read)
     * @default: false
     */
    prependToNextAction?: boolean
}

export class CallError extends Error {
    readonly date: Date;
    readonly call: Call;

    constructor (options: { message: string, call: Call });
}

export class ExitError extends CallError {
    readonly context: {
        caller: 'go_to_folder' | 'id_list_message' | 'routing_yemot'
        target: string
    };

    constructor (call: Call, context: ExitError['context']);
}

export class HangupError extends CallError {
    constructor (call: Call);
}

export class TimeoutError extends CallError {
    readonly timeout: number;

    constructor (call: Call, timeout: number);
}

// =========== Call Values Management Functions ===========

/**
 * ╫д╫Х╫а╫з╫ж╫Щ╫Х╫к ╫Ь╫а╫Щ╫Ф╫Х╫Ь ╫в╫и╫Ы╫Щ╫Э ╫й╫Ю╫Х╫и╫Щ╫Э ╫Ь╫Ы╫Ь ╫й╫Щ╫Ч╫Ф
 * ╫Ю╫Р╫д╫й╫и╫Х╫к ╫Ь╫й╫Ю╫Х╫и ╫а╫к╫Х╫а╫Щ╫Э ╫Ц╫Ю╫а╫Щ╫Щ╫Э ╫й╫Ю╫к╫Р╫д╫б╫Щ╫Э ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫С╫б╫Щ╫Х╫Э ╫Ф╫й╫Щ╫Ч╫Ф
 */

/**
 * ╫й╫Ю╫Щ╫и╫к ╫в╫и╫Ъ ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф ╫Хkey ╫б╫д╫ж╫Щ╫д╫Щ
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @param key ╫Ф╫Ю╫д╫к╫Ч ╫Ь╫й╫Ю╫Щ╫и╫к ╫Ф╫в╫и╫Ъ
 * @param value ╫Ф╫в╫и╫Ъ ╫Ь╫й╫Ю╫Щ╫и╫Ф
 * @returns ╫Ф╫Р╫Э ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫ж╫Ь╫Щ╫Ч╫Ф
 */
export function setCallValue(callId: string, key: string, value: any): boolean;

/**
 * ╫Р╫Щ╫д╫Х╫б/╫Ф╫б╫и╫к ╫в╫и╫Ъ ╫б╫д╫ж╫Щ╫д╫Щ ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф 
 * @param key ╫Ф╫Ю╫д╫к╫Ч ╫Ь╫Р╫Щ╫д╫Х╫б
 * @returns ╫Ф╫Р╫Э ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫ж╫Ь╫Щ╫Ч╫Ф
 */
export function resetCallValue(callId: string, key: string): boolean;

/**
 * ╫з╫С╫Ь╫к ╫в╫и╫Ъ ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф ╫Хkey ╫б╫д╫ж╫Щ╫д╫Щ
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @param key ╫Ф╫Ю╫д╫к╫Ч ╫Ь╫з╫С╫Ь╫к ╫Ф╫в╫и╫Ъ
 * @returns ╫Ф╫в╫и╫Ъ ╫Ф╫й╫Ю╫Х╫и ╫Р╫Х null ╫Р╫Э ╫Ь╫Р ╫а╫Ю╫ж╫Р
 */
export function getCallValue(callId: string, key: string): any | null;

/**
 * ╫С╫У╫Щ╫з╫Ф ╫Ф╫Р╫Э ╫з╫Щ╫Щ╫Э ╫в╫и╫Ъ ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф ╫Хkey ╫б╫д╫ж╫Щ╫д╫Щ
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @param key ╫Ф╫Ю╫д╫к╫Ч ╫Ь╫С╫У╫Щ╫з╫Ф
 * @returns ╫Ф╫Р╫Э ╫з╫Щ╫Щ╫Э ╫в╫и╫Ъ
 */
export function hasCallValue(callId: string, key: string): boolean;

/**
 * ╫з╫С╫Ь╫к ╫Ы╫Ь ╫Ф╫в╫и╫Ы╫Щ╫Э ╫Ф╫й╫Ю╫Х╫и╫Щ╫Э ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф ╫б╫д╫ж╫Щ╫д╫Щ╫к
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @returns ╫Ы╫Ь ╫Ф╫в╫и╫Ы╫Щ╫Э ╫Ф╫й╫Ю╫Х╫и╫Щ╫Э ╫Р╫Х null ╫Р╫Э ╫Ь╫Р ╫а╫Ю╫ж╫Р╫Х
 */
export function getAllCallValues(callId: string): Record<string, any> | null;

/**
 * ╫Ф╫б╫и╫к ╫Ы╫Ь ╫Ф╫в╫и╫Ы╫Щ╫Э ╫Ф╫й╫Ю╫Х╫и╫Щ╫Э ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф ╫б╫д╫ж╫Щ╫д╫Щ╫к
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф ╫Ь╫Ф╫б╫и╫Ф
 * @returns ╫Ф╫Р╫Э ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫ж╫Ь╫Щ╫Ч╫Ф
 */
export function clearCallValues(callId: string): boolean;

/**
 * ╫Ф╫б╫и╫к ╫Ы╫Ь ╫Ф╫в╫и╫Ы╫Щ╫Э ╫Ф╫й╫Ю╫Х╫и╫Щ╫Э ╫в╫С╫Х╫и ╫Ы╫Ь ╫Ф╫й╫Щ╫Ч╫Х╫к
 * @returns ╫Ф╫Р╫Э ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫ж╫Ь╫Щ╫Ч╫Ф
 */
export function clearAllCallValues(): boolean;

/**
 * ╫з╫С╫Ь╫к ╫Ю╫б╫д╫и ╫Ф╫й╫Щ╫Ч╫Х╫к ╫Ф╫д╫в╫Щ╫Ь╫Х╫к ╫в╫Э ╫в╫и╫Ы╫Щ╫Э ╫й╫Ю╫Х╫и╫Щ╫Э
 * @returns ╫Ю╫б╫д╫и ╫Ф╫й╫Щ╫Ч╫Х╫к ╫Ф╫д╫в╫Щ╫Ь╫Х╫к
 */
export function getActiveCallsCount(): number;

/**
 * ╫з╫С╫Ь╫к ╫Ы╫Ь ╫Ю╫Ц╫Ф╫Щ ╫Ф╫й╫Щ╫Ч╫Х╫к ╫Ф╫д╫в╫Щ╫Ь╫Х╫к
 * @returns ╫Ю╫в╫и╫Ъ ╫й╫Ь ╫Ю╫Ц╫Ф╫Щ ╫й╫Щ╫Ч╫Х╫к
 */
export function getActiveCallIds(): string[];

/**
 * ╫а╫Щ╫з╫Х╫Щ ╫в╫и╫Ы╫Щ╫Э ╫й╫д╫Т ╫к╫Х╫з╫д╫Э (placeholder ╫Ь╫в╫к╫Щ╫У)
 * @param maxAge ╫Т╫Щ╫Ь ╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ ╫С╫Ю╫Щ╫Ь╫Щ╫й╫а╫Щ╫Х╫к
 * @returns ╫Ю╫б╫д╫и ╫Ф╫й╫Щ╫Ч╫Х╫к ╫й╫а╫Х╫з╫Х
 */
export function cleanupExpiredValues(maxAge: number): number;

// =========== Backward Compatibility for Token Functions ===========

/**
 * ╫й╫Ю╫Щ╫и╫к ╫Ш╫Х╫з╫Я ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф (╫к╫Р╫Щ╫Ю╫Х╫к ╫Ь╫Р╫Ч╫Х╫и)
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @param value ╫в╫и╫Ъ ╫Ф╫Ш╫Х╫з╫Я
 * @returns ╫Ф╫Р╫Э ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫ж╫Ь╫Щ╫Ч╫Ф
 * @deprecated ╫Ф╫й╫к╫Ю╫й ╫С-setCallValue(callId, 'token', value) ╫С╫Ю╫з╫Х╫Э
 */
export function setCallToken(callId: string, value: any): boolean;

/**
 * ╫Р╫Щ╫д╫Х╫б ╫Ш╫Х╫з╫Я ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф (╫к╫Р╫Щ╫Ю╫Х╫к ╫Ь╫Р╫Ч╫Х╫и)
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @returns ╫Ф╫Р╫Э ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫ж╫Ь╫Щ╫Ч╫Ф
 * @deprecated ╫Ф╫й╫к╫Ю╫й ╫С-resetCallValue(callId, 'token') ╫С╫Ю╫з╫Х╫Э
 */
export function resetCallToken(callId: string): boolean;

/**
 * ╫з╫С╫Ь╫к ╫Ш╫Х╫з╫Я ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф (╫к╫Р╫Щ╫Ю╫Х╫к ╫Ь╫Р╫Ч╫Х╫и)
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @returns ╫Ф╫Ш╫Х╫з╫Я ╫Ф╫й╫Ю╫Х╫и ╫Р╫Х null ╫Р╫Э ╫Ь╫Р ╫а╫Ю╫ж╫Р
 * @deprecated ╫Ф╫й╫к╫Ю╫й ╫С-getCallValue(callId, 'token') ╫С╫Ю╫з╫Х╫Э
 */
export function getCallToken(callId: string): any | null;

/**
 * ╫С╫У╫Щ╫з╫Ф ╫Ф╫Р╫Э ╫з╫Щ╫Щ╫Э ╫Ш╫Х╫з╫Я ╫в╫С╫Х╫и ╫й╫Щ╫Ч╫Ф (╫к╫Р╫Щ╫Ю╫Х╫к ╫Ь╫Р╫Ч╫Х╫и)
 * @param callId ╫Ю╫Ц╫Ф╫Ф ╫Ф╫й╫Щ╫Ч╫Ф
 * @returns ╫Ф╫Р╫Э ╫з╫Щ╫Щ╫Э ╫Ш╫Х╫з╫Я
 * @deprecated ╫Ф╫й╫к╫Ю╫й ╫С-hasCallValue(callId, 'token') ╫С╫Ю╫з╫Х╫Э
 */
export function hasCallToken(callId: string): boolean;